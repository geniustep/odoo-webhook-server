# ๐ ูุธุฑุฉ ุดุงููุฉ ุนูู ูุดุฑูุน Odoo Webhook Server

## ๐๏ธ ุงูุจููุฉ ุงูุญุงููุฉ

### **ููุฌุฏ ุชุทุจูู FastAPI ูุงุญุฏ ููุท** ูู `main.py`

```
/opt/webhook_server/
โโโ main.py                    โญ ุงูุชุทุจูู ุงูุฑุฆูุณู ุงููุญูุฏ
โโโ webhook_server.py          โ ูุฏูู (ูุนุทูู ุจุงููุงูู - ููุฏ ูุนูู)
โโโ ...
```

---

## ๐ฆ ุงูุชุทุจูู ุงูุฑุฆูุณู: `main.py`

### **ูุนูููุงุช ุงูุชุทุจูู:**
```python
title: "Odoo Webhook Server"
version: "2.0.0"
description: "API for Odoo webhooks integration"
```

### **ุงูู Routers ุงููุณุฌูุฉ (2 routers):**

```python
1. updates_router       ูู webhook/update_webhook.py
   โโโ /api/v1/check-updates
   โโโ /api/v1/cleanup
   โโโ /api/v1/health

2. webhook_router       ูู webhook/webhook.py
   โโโ /api/v1/webhook/events
```

---

## ๐๏ธ ุงููุญุฏุงุช (Modules)

### 1๏ธโฃ **Webhook Module** (`/webhook/`)
```
webhook/
โโโ __init__.py
โโโ update_webhook.py      โ Updates & Cleanup endpoints
โโโ webhook.py             โ Webhook events handling
```

**ุงููุธููุฉ:** ุฅุฏุงุฑุฉ Webhooks ูู Odoo

---

### 2๏ธโฃ **Core Module** (`/core/`)
```
core/
โโโ auth.py               โ ุงููุตุงุฏูุฉ (ุญุงููุงู ุจุณูุท)
```

---

### 3๏ธโฃ **Clients Module** (`/clients/`)
```
clients/
โโโ (ูููุงุช ุงูุนููุงุก - ุฅู ูุฌุฏุช)
```

---

## ๐ฏ ุงูุฎุฏูุงุช ุงููุชุงุญุฉ

### โ **ุงูุฎุฏูุงุช ุงููุดุทุฉ:**

| ุงูุฎุฏูุฉ | ุงูุญุงูุฉ | ุงููุณุงุฑุงุช |
|--------|--------|----------|
| **Webhook** | โ Active | `/api/v1/webhook/*` |
| **Updates** | โ Active | `/api/v1/check-updates`, `/api/v1/cleanup` |
| **Health** | โ Active | `/api/v1/health` |

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **Odoo Database**
ุงููุดุฑูุน ูุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช Odoo ุนุจุฑ API ูููุณ ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ.

---

## ๐ง ุงูุฅุนุฏุงุฏุงุช

### **CORS:**
```python
ALLOWED_ORIGINS = [
    "https://app.propanel.ma",
    "https://flutter.propanel.ma",
    "http://localhost:3000",
    "http://localhost:5173"
]
```

### **Rate Limiting:**
- ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช (slowapi)
- ุญุฏ 429 ุนูุฏ ุงูุชุฌุงูุฒ

---

## ๐ ุงููููุงุช ุงูุฅุถุงููุฉ

```
/opt/webhook_server/
โโโ config.py              โ ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน
โโโ requirements.txt       โ ุงูููุชุจุงุช ุงููุทููุจุฉ
โโโ Dockerfile             โ ููู Docker
โโโ webhook.log           โ ุณุฌูุงุช Webhook
โโโ auth.log              โ ุณุฌูุงุช ุงููุตุงุฏูุฉ
โโโ venv/                 โ ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
```

---

## ๐ซ ุงููููุงุช ุงููุฏููุฉ/ุงููุนุทูุฉ

### โ `webhook_server.py`
- **ุงูุญุงูุฉ:** ูุนุทูู ุจุงููุงูู (ูู ุงูููุฏ ูุนูู)
- **ุงูุณุจุจ:** ุชู ููู ูู ุงููุธุงุฆู ุฅูู `main.py` ูุน ุชุญุณููุงุช
- **ุงูุฅุฌุฑุงุก ุงูููุชุฑุญ:** ูููู ุญุฐูู ุจุฃูุงู

---

## ๐ ุฅุญุตุงุฆูุงุช ุงููุดุฑูุน

| ุงูุนูุตุฑ | ุงูุนุฏุฏ |
|--------|-------|
| **ุชุทุจููุงุช FastAPI** | 1 (main.py) |
| **Routers** | 2 routers |
| **Modules** | 3 modules (webhook, core, clients) |
| **API Endpoints** | 4 endpoints |
| **ููุงุนุฏ ุงูุจูุงูุงุช** | 0 (ูุชุตู ุจู Odoo API) |

---

## ๐ฏ ุงูุฎูุงุตุฉ

### โ **ูุง ูู ูุดุท:**
- โ ุชุทุจูู FastAPI ูุงุญุฏ ูู `main.py`
- โ 2 routers ูุชูุงููุฉ
- โ ุงุชุตุงู ุจู Odoo API
- โ CORS ู Rate Limiting
- โ ูุธุงู ูุตุงุฏูุฉ ุนุจุฑ Session ID

### โ **ูุง ูู ุบูุฑ ูุณุชุฎุฏู:**
- โ `webhook_server.py` (ูุฏูู ููุนุทู)

### ๐ง **ุงูุชูุตูุงุช:**
1. ุญุฐู `webhook_server.py` ูุชูุธูู ุงููุดุฑูุน
2. ุงูุงุญุชูุงุธ ุจู `main.py` ูุชุทุจูู ุฑุฆูุณู ูุญูุฏ
3. ุฌููุน ุงููุธุงุฆู ุชุนูู ุจุดูู ููุชุงุฒ

---

## ๐ ููููุฉ ุงูุชุดุบูู

```bash
# ุชุดุบูู ุงูุณูุฑูุฑ
cd /opt/webhook_server
source venv/bin/activate
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

# ุงููุตูู ููุชูุซูู
http://localhost:8000/docs        # Swagger UI
http://localhost:8000/redoc       # ReDoc
```

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

**ููุฌุฏ ูุดุฑูุน FastAPI ูุงุญุฏ ููุท:**
- `main.py` โ ุงูุชุทุจูู ุงูุฑุฆูุณู ุงููุญูุฏ ุงููุดุท โ
- `webhook_server.py` โ ูุฏูู ููุนุทู (ูููู ุญุฐูู) โ

**ุงูุญุงูุฉ:** ุงููุดุฑูุน ููุธู ูุฌุงูุฒ ููุฅูุชุงุฌ ๐

